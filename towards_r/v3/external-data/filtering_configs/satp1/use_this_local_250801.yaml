
tags:
  # basedir:  /global/cfs/cdirs/sobs/metadata/satp1
  basedir: /scratch/gpfs/SIMONSOBS/so/tracked/metadata/satp1/
  # manifestdir: /global/cfs/cdirs/sobs/metadata/satp1/manifests
  manifestdir: /scratch/gpfs/SIMONSOBS/so/tracked/metadata/satp1/manifests

imports:
  - sotodlib.io.load_book
  - sotodlib.io.metadata

obsfiledb: '{basedir}/satp1_obsfiledb_local.sqlite'
obsdb: '{basedir}/satp1_obsdb_240911m_local.sqlite'

obs_loader_type: 'obs-book'
obs_colon_tags: [wafer.bandpass, wafer_slot]

metadata:
  - db: '{manifestdir}/smurf_detsets/v0/smurf_detset_info_local.sqlite'
    label: smurf
    det_info: true
    on_missing: fail
  - db: '{manifestdir}/det_match/satp1_det_match_250416m/assignment_local.sqlite'
    label: assignment
    det_info: true
    on_missing: trim
  - db: '{manifestdir}/wafer_info/satp1_wafer_info_250403r1/wafer_info_local.sqlite'
    label: wafer_info
    det_info: true
    on_missing: fail
  - db: '{manifestdir}/det_cal/satp1_det_cal_250515m/det_cal_local.sqlite'
    label: det_cal
    unpack: det_cal
    # on_missing: fail  ## work-around for variable mask
    on_missing: trim
  - db: '/scratch/gpfs/SIMONSOBS/users/ktc2/relcal/satp1_atmosphere_mode_relcal.db'
    name: relcal
    on_missing: trim
  - db: '{manifestdir}/pointing_model/satp1_pointing_model_241004r2/db_local.sqlite'
    label: pointing_model
    unpack: pointing_model
  - db: '{manifestdir}/focal_plane/satp1_focal_plane_240925r3/db_cmsub_local.sqlite'
    label: focal_plane
    unpack: focal_plane
    on_missing: fail
  - db: '{manifestdir}/hwp_angle_model/satp1_hwp_angle_model_250711r1/hwp_angle_model_local.sqlite'
    label: hwp_model
    unpack:
    - 'hwp_angle_model'
  - db: '{manifestdir}/hwp_angles/satp1_hwp_angles_250711m/hwp_angle_local.sqlite'
    label: hwp_solution
    unpack:
    - 'hwp_solution'
  - db: '/scratch/gpfs/SIMONSOBS/users/rg8911/dbs/abscal/abscal_20250805_V0.sqlite'
    label: abscal
    unpack:
    - abscal
  - db: '/scratch/gpfs/SIMONSOBS/sat-iso/wobble/20250710/satp1/wobble_params.sqlite'
    label: wobble_params
    unpack:
    - wobble_params
